---
import BlogLayout from "@/components/layouts/BlogLayout.astro";
import { getEntry } from "astro:content";
import type { CollectionEntry } from "astro:content";

const { slug } = Astro.params;

const post: CollectionEntry<"blog"> | undefined = await getEntry(
  "blog",
  slug as string
);

// Render the content
const { Content } = post ? await post.render() : { Content: null };

const formatDate = (date: Date) => {
  const month = date.getMonth() + 1;
  const day = date.getDate();
  const year = date.getFullYear();
  return `${month}-${day}-${year}`;
};
---

<BlogLayout id={post?.slug}>
  <h1>{post?.data.title}</h1>
  <time>{post ? formatDate(post.data.publishDate) : "Date not available"}</time>
  <article>
    {Content ? <Content /> : <p>Content not available</p>}
  </article>
</BlogLayout>
